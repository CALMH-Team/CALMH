(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{O64e:function(n,l,t){"use strict";t.r(l);var e=t("CcnG"),u=t("mrSG"),i=t("gIcY"),o=t("ZZ/e"),r=t("n6ga"),s=t("AY+Z"),a=t("Hubz"),b=t("yGRr"),c=t("eECP"),d=t("lGQG"),h=function(){function n(n,l,t,e,u,o,r,s,a){this.navController=n,this.formBuilder=l,this.loadingCtrl=t,this.restApiSvc=e,this.alertCtrl=u,this.actionSheetCtrl=o,this.modalCtrl=r,this.caseSvc=s,this.authSvc=a,this.eventForm=this.formBuilder.group({event:["",i.n.required]}),this.reload()}return n.prototype.reload=function(){return u.b(this,void 0,void 0,function(){var n,l=this;return u.e(this,function(t){switch(t.label){case 0:return this.events=[new a.a("new",new Date,"location",new b.a("New type"),null)],n=this,[4,this.loadingCtrl.create({message:"Loading events...",backdropDismiss:!0})];case 1:return n.loader=t.sent(),this.loader.present().then(function(){l.restApiSvc.getAll("disaster").subscribe(function(n){n.forEach(function(n){var t=a.a.DISASTER_TYPES.find(function(l){return l.id===n.disasterType});n.disasterType=t||n.disasterType,n.id=n._id,l.events.push(n)}),l.loader.dismiss()})}),[2]}})})},n.prototype.registerEvent=function(){var n=this;this.caseSvc.createNewCase(),this.caseSvc.setUser(this.authSvc.user),this.caseSvc.setDisaster(this.events.find(function(l){return l.id===n.eventForm.get("event").value})),this.goTo("reactions")},n.prototype.goTo=function(n){this.navController.navigateForward(n)},n.prototype.disasterActionSheet=function(n){return u.b(this,void 0,void 0,function(){var l,t,e=this;return u.e(this,function(u){switch(u.label){case 0:return this.authSvc.isAdmin()?(l=[{text:"Create",icon:"create",handler:function(){e.editDisaster(n)}}],t=[{text:"Modify",icon:"create",handler:function(){e.editDisaster(n)}},{text:"Delete",role:"destructive",icon:"trash",handler:function(){e.confirmDelete(n)}}],[4,this.actionSheetCtrl.create({header:"What do you want to do?",buttons:"new"===n?l:t})]):[3,3];case 1:return[4,u.sent().present()];case 2:u.sent(),u.label=3;case 3:return[2]}})})},n.prototype.confirmDelete=function(n){return u.b(this,void 0,void 0,function(){var l=this;return u.e(this,function(t){switch(t.label){case 0:return[4,this.alertCtrl.create({header:"Delete event?",message:"Are you sure you want to delete this event?",buttons:[{text:"Yes",handler:function(){l.deleteEvent(n)}},{text:"No",handler:function(){}}]})];case 1:return t.sent().present(),[2]}})})},n.prototype.deleteEvent=function(n){return u.b(this,void 0,void 0,function(){var l=this;return u.e(this,function(t){return this.restApiSvc.delete("disaster",n).subscribe(function(){l.reload()}),[2]})})},n.prototype.editDisaster=function(n){return u.b(this,void 0,void 0,function(){var l,t=this;return u.e(this,function(e){switch(e.label){case 0:return[4,this.modalCtrl.create({component:s.a,componentProps:{id:n}})];case 1:return(l=e.sent()).onDidDismiss().then(function(n){null!==n&&n.data&&t.reload()}),[4,l.present()];case 2:return e.sent(),[2]}})})},n.prototype.ngOnInit=function(){},n}(),p=function(){return function(){}}(),v=t("pMnS"),f=t("oBZk"),g=t("Ip0R"),m=e.nb({encapsulation:0,styles:[[""]],data:{}});function z(n){return e.Jb(0,[(n()(),e.pb(0,0,null,null,11,"ion-item",[],null,[[null,"press"]],function(n,l,t){var e=!0;return"press"===l&&(e=!1!==n.component.disasterActionSheet(n.context.$implicit.id)&&e),e},f.eb,f.t)),e.ob(1,49152,null,0,o.H,[e.h,e.k,e.z],null,null),(n()(),e.pb(2,0,null,0,3,"ion-radio",[["slot","start"]],null,[[null,"ionBlur"],[null,"ionSelect"]],function(n,l,t){var u=!0;return"ionBlur"===l&&(u=!1!==e.zb(n,5)._handleBlurEvent()&&u),"ionSelect"===l&&(u=!1!==e.zb(n,5)._handleIonSelect(t.target.checked)&&u),u},f.mb,f.A)),e.Eb(5120,null,i.g,function(n){return[n]},[o.Nb]),e.ob(4,49152,null,0,o.Z,[e.h,e.k,e.z],{value:[0,"value"]},null),e.ob(5,16384,null,0,o.Nb,[e.k],null,null),(n()(),e.pb(6,0,null,0,5,"ion-label",[],null,null,null,f.fb,f.u)),e.ob(7,49152,null,0,o.N,[e.h,e.k,e.z],null,null),(n()(),e.pb(8,0,null,0,1,"h2",[],null,null,null,null,null)),(n()(),e.Hb(9,null,[""," on ",""])),(n()(),e.pb(10,0,null,0,1,"small",[],null,null,null,null,null)),(n()(),e.Hb(11,null,["",""]))],function(n,l){n(l,4,0,e.rb(1,"",l.context.$implicit.id,""))},function(n,l){n(l,9,0,l.context.$implicit.disasterType.name,l.context.$implicit.location),n(l,11,0,l.context.$implicit.date)})}function C(n){return e.Jb(0,[(n()(),e.pb(0,0,null,null,8,"ion-row",[],null,null,null,f.ob,f.D)),e.ob(1,49152,null,0,o.ib,[e.h,e.k,e.z],null,null),(n()(),e.pb(2,0,null,0,6,"ion-col",[["size","12"]],null,null,null,f.V,f.k)),e.ob(3,49152,null,0,o.t,[e.h,e.k,e.z],{size:[0,"size"]},null),(n()(),e.pb(4,0,null,0,4,"ion-button",[["color","primary"],["expand","block"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.registerEvent()&&e),e},f.M,f.b)),e.ob(5,49152,null,0,o.k,[e.h,e.k,e.z],{color:[0,"color"],expand:[1,"expand"]},null),(n()(),e.Hb(-1,0,["Next "])),(n()(),e.pb(7,0,null,0,1,"ion-icon",[["name","arrow-dropright"]],null,null,null,f.bb,f.q)),e.ob(8,49152,null,0,o.C,[e.h,e.k,e.z],{name:[0,"name"]},null)],function(n,l){n(l,3,0,"12"),n(l,5,0,"primary","block"),n(l,8,0,"arrow-dropright")},null)}function k(n){return e.Jb(0,[(n()(),e.pb(0,0,null,null,10,"ion-header",[],null,null,null,f.ab,f.p)),e.ob(1,49152,null,0,o.B,[e.h,e.k,e.z],null,null),(n()(),e.pb(2,0,null,0,8,"ion-toolbar",[],null,null,null,f.vb,f.K)),e.ob(3,49152,null,0,o.Bb,[e.h,e.k,e.z],null,null),(n()(),e.pb(4,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,f.N,f.c)),e.ob(5,49152,null,0,o.l,[e.h,e.k,e.z],null,null),(n()(),e.pb(6,0,null,0,1,"ion-menu-button",[],null,null,null,f.ib,f.y)),e.ob(7,49152,null,0,o.R,[e.h,e.k,e.z],null,null),(n()(),e.pb(8,0,null,0,2,"ion-title",[],null,null,null,f.ub,f.J)),e.ob(9,49152,null,0,o.zb,[e.h,e.k,e.z],null,null),(n()(),e.Hb(-1,0,["Disasters"])),(n()(),e.pb(11,0,null,null,24,"ion-content",[],null,null,null,f.W,f.l)),e.ob(12,49152,null,0,o.u,[e.h,e.k,e.z],null,null),(n()(),e.pb(13,0,null,0,22,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,l,t){var u=!0;return"submit"===l&&(u=!1!==e.zb(n,15).onSubmit(t)&&u),"reset"===l&&(u=!1!==e.zb(n,15).onReset()&&u),u},null,null)),e.ob(14,16384,null,0,i.p,[],null,null),e.ob(15,540672,null,0,i.e,[[8,null],[8,null]],{form:[0,"form"]},null),e.Eb(2048,null,i.a,null,[i.e]),e.ob(17,16384,null,0,i.j,[[4,i.a]],null,null),(n()(),e.pb(18,0,null,null,15,"ion-list",[],null,null,null,f.hb,f.v)),e.ob(19,49152,null,0,o.O,[e.h,e.k,e.z],null,null),(n()(),e.pb(20,0,null,0,13,"ion-radio-group",[["formControlName","event"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(n,l,t){var u=!0;return"ionBlur"===l&&(u=!1!==e.zb(n,21)._handleBlurEvent()&&u),"ionChange"===l&&(u=!1!==e.zb(n,21)._handleChangeEvent(t.target.value)&&u),u},f.lb,f.B)),e.ob(21,16384,null,0,o.Pb,[e.k],null,null),e.Eb(1024,null,i.g,function(n){return[n]},[o.Pb]),e.ob(23,671744,null,0,i.d,[[3,i.a],[8,null],[8,null],[6,i.g],[2,i.r]],{name:[0,"name"]},null),e.Eb(2048,null,i.h,null,[i.d]),e.ob(25,16384,null,0,i.i,[[4,i.h]],null,null),e.ob(26,49152,null,0,o.ab,[e.h,e.k,e.z],null,null),(n()(),e.pb(27,0,null,0,4,"ion-list-header",[],null,null,null,f.gb,f.w)),e.ob(28,49152,null,0,o.P,[e.h,e.k,e.z],null,null),(n()(),e.pb(29,0,null,0,2,"ion-label",[],null,null,null,f.fb,f.u)),e.ob(30,49152,null,0,o.N,[e.h,e.k,e.z],null,null),(n()(),e.Hb(-1,0,["Select event"])),(n()(),e.gb(16777216,null,0,1,null,z)),e.ob(33,278528,null,0,g.j,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null),(n()(),e.gb(16777216,null,null,1,null,C)),e.ob(35,16384,null,0,g.k,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component;n(l,15,0,t.eventForm),n(l,23,0,"event"),n(l,33,0,t.events),n(l,35,0,!t.authSvc.isAdmin())},function(n,l){n(l,13,0,e.zb(l,17).ngClassUntouched,e.zb(l,17).ngClassTouched,e.zb(l,17).ngClassPristine,e.zb(l,17).ngClassDirty,e.zb(l,17).ngClassValid,e.zb(l,17).ngClassInvalid,e.zb(l,17).ngClassPending),n(l,20,0,e.zb(l,25).ngClassUntouched,e.zb(l,25).ngClassTouched,e.zb(l,25).ngClassPristine,e.zb(l,25).ngClassDirty,e.zb(l,25).ngClassValid,e.zb(l,25).ngClassInvalid,e.zb(l,25).ngClassPending)})}function x(n){return e.Jb(0,[(n()(),e.pb(0,0,null,null,1,"app-disasters",[],null,null,null,k,m)),e.ob(1,114688,null,0,h,[o.Ib,i.b,o.Fb,r.a,o.b,o.a,o.Hb,c.a,d.a],null,null)],function(n,l){n(l,1,0)},null)}var y=e.lb("app-disasters",h,x,{},{},[]),w=t("ZYCi");t.d(l,"DisastersPageModuleNgFactory",function(){return S});var S=e.mb(p,[],function(n){return e.wb([e.xb(512,e.j,e.bb,[[8,[v.a,y]],[3,e.j],e.x]),e.xb(4608,g.m,g.l,[e.u,[2,g.s]]),e.xb(4608,i.q,i.q,[]),e.xb(4608,i.b,i.b,[]),e.xb(4608,o.c,o.c,[e.z,e.g]),e.xb(4608,o.Hb,o.Hb,[o.c,e.j,e.q]),e.xb(4608,o.Mb,o.Mb,[o.c,e.j,e.q]),e.xb(1073742336,g.b,g.b,[]),e.xb(1073742336,i.o,i.o,[]),e.xb(1073742336,i.f,i.f,[]),e.xb(1073742336,i.m,i.m,[]),e.xb(1073742336,o.Db,o.Db,[]),e.xb(1073742336,w.o,w.o,[[2,w.u],[2,w.m]]),e.xb(1073742336,p,p,[]),e.xb(1024,w.k,function(){return[[{path:"",component:h}]]},[])])})}}]);